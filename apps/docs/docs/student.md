# Ученики

[[toc]]

## Где используется

Список учеников используется в следующих разделах системы:
- [Расписание](/docs/event-calendar.html)
- [Оплаты](/docs/payment.html)

## Переход в раздел

В меню должен отображаться раздел "Ученики".

При клике на пункт меню "Ученики" происходит переход на страницу с учениками.

## Содержимое десктопной страницы

На странице отображается:
- Заголовок "Ученики"
- Кнопка "Добавить". При клике на кнопку "Добавить" открывается не заполненная форма создания и редактирования ученика
- Таблица с учениками

## Таблица контактов

Для удобства колонки таблицы содержат не все поля [формы](/docs/english-level.html#form-student)!

Таблица учеников содержит колонки:
- "ФИО"
- "Уровень"
- "Количество занятий в неделю"
- "Цель занятий"
- "Длительность урока"
- "Оплата за урок"
- "Оплата в неделю"
- "Дата оплаты"
- "Расписание"
- "Стоимость урока"
- "Цвет"

Каждая строка таблицы содержит иконку контекстного меню

При клике на иконку контекстного меню открывается выпадающее меню с пунктами: 
- "Создать уроки на текущий месяц"
- "Создать уроки на следующий месяц"
- "Посмотреть описание"
- "Редактировать"
- "Удалить"

При клике на пункт "Редактировать" открывается форма редактирования и создания контакта.

При клике на пункт "Удалить" открывается модальное окно с подтверждением удаления контакта.

При удалении студента удаляются все связанные с ним данные (расписания ученика, уроки, оплаты и пользователи бота).

При клике на пункт "Посмотреть описание" открывается модальное окно с описанием контакта.

### Содержимое мобильной таблицы

Таблица содержит колонку "ФИО"

У не раскрытой строки таблица содержит иконку для раскрытия строки.

У раскрытой строки таблица содержит иконку для скрытия строки.

Раскрытая строка содержит пункты:
- "Уровень"
- "Количество занятий в неделю"
- "Цель занятий"
- "Длительность урока"
- "Оплата за урок"
- "Оплата в неделю"
- "Расписание:"
- "Стоимость урока"

### Фильтры таблицы

| Название поля               | Тип фильтра       |
|-----------------------------|-------------------|
| ФИО                         | Вхождение в текст |
| Уровень                     | Выбор из списка   |
| Количество занятий в неделю | Вхождение в текст |
| Цель занятий                | Выбор из списка   |
| Длительность урока          | хождение в текст  |
| Стоимость урока             | Вхождение в текст |


### Контекстное меню

Контекстное меню содержит кнопки:
- **Редактировать** - открывает форму редактирования.
- **Удалить** - открывает модальное окно для подтверждения удаления. Удаление ученика приводит к удалению привязанных к нему [расписаний](/docs/student.html#schedule), [уроков](/docs/lesson) и [оплат](/docs/payment).

### Модальное окно "Описание ученика"

Модальное окно содержит:
- ФИО ученика
- Номер телефона
- Социальные сети
- Пожелания к урокам
- Логин ProgressMe
- Пароль ProgressMe

### Модальное окно "Предупреждение об удалении"

Модальное окно содержит:
- Заголовок "Вы уверены, что хотите удалить ученика?"
- Текст "Это приведет к удалению ученика и привязанных к нему расписаний, уроков, расписаний этих уроков, оплат и пользователя бота."
- Кнопку "Удалить" и иконку закрытия модального окна

При клике на кнопку "Удалить" ученик удаляется и таблица учеников обновляется.

При клике на иконку закрытия происходит закрытие модального окна без удаления ученика.

## Форма создания и редактирования ученика

Форма создания и редактирования состоит из полей:

| Название поля               | Тип поля                                              | Обязательное поле | Доп описание                                                                                                                                                                                                          |
|-----------------------------|-------------------------------------------------------|-------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ФИО                         | Текст                                                 | Да                | Заполняется в свободной форме. Служит для отображения информации о ученике. Поле "ФИО" имеет валидацию на максимальное количество символов (50)                                                                       |
| Количество занятий в неделю | Число                                                 | Да                | Указывается целое число. При расчетах на месяц по умолчанию берется 4 недели в месяце. Поле имеет валидацию на минимальное число (1) и на максимальное число (40)                                                     |
| Стоимость урока             | Число                                                 | Да                | Указывается целое число, которое является суммой оплаты за один урок без указания валюты. Все расчеты в системе указываются в рублях. Поле имеет валидацию на минимальное число (500) и на максимальное число (30000) |
| Время урока в минутах       | Число                                                 | Да                | Указываем время урока в минутах. Поле "Время урока" имеет валидацию на минимальное число (1) и на максимальное число (90)                                                                                             |
| Цвет                        | Текст                                                 | Да                | Используется для цветового выделения уроков ученика в [расписании](/docs/event-calendar.html).                                                                                                                        |
| Мобильный телефон           | Текст                                                 | Нет               | Информация о ученике. Не используется в других разделах. Поле имеет валидацию на максимальное количество символов (30)                                                                                                |
| Число месяца для оплаты     | Число                                                 | Нет               | Информация о ученике. Не используется в других разделах. Поле имеет валидацию на минимальное число (1) и на максимальное число (31)                                                                                                                                                             |
| Уровень языка               | Список с [уровнями языка](/docs/english-level.html)   | Да                | Информация о ученике. Не используется в других разделах.                                                                                                                                                              |
| Цель занятий                | Список с [целями занятий](/docs/purposes-lesson.html) | Да                | Информация о ученике. Не используется в других разделах.                                                                                                                                                              |
| Логин ProgressMe            | Текст                                                 | Нет               | Используется в [телеграм-боте](/docs/telegram.html).                                                                                                                                                                  |
| Пароль ProgressMe           | Текст                                                 | Нет               | Используется в [телеграм-боте](/docs/telegram.html).                                                                                                                                                                  |
| Социальные сети             | Текст                                                 | Нет               | Заполняется в свободной форме.                                                                                                                                                                                        |
| Пожелания к урокам          | Текст                                                 | Нет               | Заполняется в свободной форме.                                                                                                                                                                                        |
| Расписание. День недели     | Список с днями недели                                 | Да                | Использует для создания уроков на текущий и следующий месяц в контекстном меню ученика в таблице учеников.                                                                                                            |
| Расписание. Время           | Выбор времени (часы и минуты)                         | Да                | Использует для создания уроков на текущий и следующий месяц в контекстном меню ученика в таблице учеников.                                                                                                            |


В случае создания нового ученика форма должна быть пустой.

В случае редактирования ученика форма должна быть заполнена данными редактируемого контакта.

При клике на кнопку "Добавить занятие" добавляются дополнительные поля "День недели" и "Время".

Если форма содержит более двух полей "День недели" и "Время", то кнопка в форме у каждой пары полей (после первой пары) "День недели" и "Время" содержится кнопка "Удалить занятие".

При клике на кнопку "Удалить занятие" удаляется соответствущая пара полей "День недели" и "Время".

При создании нового контакта форма содержит кнопку "Создать".

При клике на кнопку "Создать" происходит открытие таблицы "Оплаты", которая содержит созданную оплату.

При редактировании контакта форма содержит кнопку "Сохранить".

При клике на кнопку "Сохранить" происходит открытие таблицы "Оплаты", которая содержит обновленную оплату.

### Блок "Расписание" {#schedule-student}

Блок расписание содержит поле "День недели" и "Время".

При клике на кнопку "Добавить занятие" происходит добавление дополнительных двух полей "День недели" и "Время".

Каждая пара полей является расписанием для занятия. 

Для создания нового ученика нужно заполнить минимум одну пару полей, которая будет являться расписанием для занятия 1 раз в неделю.

Кнопка "Добавить занятие" служит для создания нескольких занятий в неделю.