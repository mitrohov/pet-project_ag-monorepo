# Телеграм бот

## Идентификация пользователя для использования бота

Для того чтобы пользователь стал идентифицированный и получил доступ к возможностям бота
необходимо добавить пользователя в таблицу в разделе [Пользователи бота](/docs/telegram.html)

При добавлении нового пользователя необходимо заполнить поле "TG user name", которое является
именем пользователя в телеграмме, а так же установить его роль (Администратор / Пользователь) и выбрать ученика,
которому предоставляется доступ.

В форме создания чекбокс находится в положении "Пользователь не активен".
Пользователи с таким состоянием чекбокса являются зарегистрированными, но не активными и не получают доступ к боту.
Для активации доступа к боту необходимо установить чекбокс в положение "Пользователь активен".

Таким образом можно заполнить таблицу нужными пользователями и не предоставлять им доступ к использованию бота.

В случае если чекбокс не активен или владелец телеграмм аккаунта не занесен в таблицу, тогда бот будет отвечать сообщением:
"Привет. Я виртуальный помощник по английскому языку.
К сожалению, @anastasia_geiko не предупредила о тебе.
Пожалуйста, обратись к Насте за доступом."

## Доступные функции бота

Все данные и сообщения, которые бот отправляет пользователю, являются связанными с выбранным учеником в таблице [Пользователи бота](/docs/telegram.html)

При отправке любого сообщения в телеграм бот от идентифицированного пользователя, бот отвечает меню из списка кнопок:

- **Действия с ProgressMe.** При клике открывается отдельный список кнопок (описанных ниже).
- **Мое расписание.** При клике бот отвечает сообщением: "Твое стандартное расписание: Вторник 17:05. На этой неделе у тебя занятия: 22:20 Четверг"
- **Сколько осталось оплаченных уроков.** При клике бот отвечает сообщением: "У тебя осталось 3 оплаченных урока"
- **Сколько переносов доступно.** При клике бот отвечает сообщением: "В этом месяце у тебя осталось 3 доступных переноса занятий"
- **Правила посещения занятий.** При клике бот отвечает правилами посещения занятий.

Так же повторно вызвать меню можно по клику на иконку слева от поля ввода текста.

### Действия с ProgressMe

При клике на кнопку "Действия с ProgressMe" бот отвечает списком кнопок:

- **Войти в класс.** При клике бот отвечает ссылкой: "https://progressme.ru/Account/Login"
- **Мой логин и пароль.** При клике бот отвечает сообщением: "Твой логин: Olgaskob@yandex.ru. Твой пароль: 7216"
- **Обучающее видео.** При клике бот отвечает сообщением: "Видео доступно по ссылке https://www.youtube.com/watch?v=hxCRucgV_6M&t=89s&ab_channel=AnastasiaGeiko"
- **Назад** При клике бот отвечает изначальным набором кнопок.

## Администраторы и пользователи

На данный момент нет разницы между доступными возможностями между администратором и пользователями.

Данное разделение было создано на будущее, чтобы в случае необходимости добавить различные возможности для администраторов.
